<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>문의 목록</title>

<style>

body{
    font-family:'Noto Sans KR',sans-serif;
    background:#f1f5f9;
    margin:0;
}

.header{
    background:#2f7d32;
    color:white;
    padding:20px 40px;
    font-size:22px;
}

.container{
    padding:30px 40px;
}

.card{
    background:white;
    padding:20px;
    margin-bottom:15px;
    border-radius:10px;
    box-shadow:0 4px 10px rgba(0,0,0,0.1);
}

.search-box{
    background:white;
    padding:20px;
    margin-bottom:20px;
    border-radius:10px;
}

button{
    padding:8px 15px;
    background:#2f7d32;
    color:white;
    border:none;
    border-radius:5px;
}

</style>
</head>
<body>

<div class="header">
문의 목록
</div>

<div class="container">

<div class="search-box">

<input type="text" id="searchName" placeholder="이름">
<input type="text" id="searchPhone" placeholder="연락처">

<button onclick="searchInquiry()">문의 조회</button>

</div>

<div id="list">

{% for item in inquiries %}

<div class="card">

<b>이름:</b> {{ item.name }}<br>
<b>연락처:</b> {{ item.phone }}<br>
<b>문의내용:</b><br>
{{ item.message }}<br><br>

<b>답변:</b><br>
{{ item.reply or "답변 대기중" }}

</div>

{% endfor %}

</div>

</div>

<script>

function searchInquiry(){

const name=document.getElementById("searchName").value;
const phone=document.getElementById("searchPhone").value;

fetch("/search_inquiry",{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({name,phone})
})
.then(res=>res.json())
.then(data=>{

let html="";

data.forEach(item=>{

html+=`
<div class="card">

<b>문의내용:</b><br>
${item.message}<br><br>

<b>답변:</b><br>
${item.reply||"답변 대기중"}

</div>
`;

});

document.getElementById("list").innerHTML=html;

});

}

</script>

</body>
</html>