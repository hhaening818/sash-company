<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>문의 목록</title>

<style>

body{
    margin:0;
    font-family:'Noto Sans KR',sans-serif;
    background:#f8f9fb;
}

/* 상단 */
.header{
    background:white;
    padding:20px 60px;
    border-bottom:1px solid #ddd;
    display:flex;
    justify-content:space-between;
}

.title{
    font-size:40px;
    text-align:center;
    margin-top:50px;
}

.subtitle{
    text-align:center;
    color:#777;
    margin-bottom:30px;
}

/* 검색 */
.search-box{
    text-align:center;
    margin-bottom:20px;
}

.search-box input{
    padding:10px;
    width:300px;
}

.search-box button{
    padding:10px 20px;
    background:#2f7d32;
    color:white;
    border:none;
}

/* 목록 */
.container{
    max-width:1000px;
    margin:auto;
    background:white;
}

.row{
    display:flex;
    justify-content:space-between;
    padding:20px;
    border-bottom:1px solid #eee;
    cursor:pointer;
}

.row:hover{
    background:#f5f5f5;
}

.status{
    padding:4px 10px;
    border-radius:5px;
    color:white;
    font-size:14px;
}

.status.대기{
    background:#999;
}

.status.완료{
    background:#2f7d32;
}

.pagination{
    text-align:center;
    padding:20px;
}

.pagination a{
    margin:0 5px;
    text-decoration:none;
    color:black;
}

.active{
    font-weight:bold;
}

.nav-menu{
    width:100%;
    background:#2f7d32;
    display:flex;
    justify-content:center;
    gap:50px;
    padding:15px 0;
}

.nav-menu a{
    color:white;
    text-decoration:none;
    font-size:17px;
}

.nav-menu a:hover{
    opacity:0.7;
}

.nav-menu a.active{
    font-weight:bold;
    border-bottom:2px solid white;
}

.nav-menu .home{
    font-weight:bold;
}

</style>
</head>
<body>

    <nav class="nav-menu">

        <a href="/" class="home">홈</a>

        <a href="/#service">시공 분야</a>

        <a href="/portfolio">시공 사례</a>

        <a href="/inquiries" class="active">문의 목록</a>

        <a href="/#contact">문의하기</a>

    </nav>


<div class="title">
문의 목록
</div>

<div class="subtitle">
고객 문의 내역
</div>


<div class="search-box" style="display:flex; justify-content:center; gap:10px;">

<form method="get" style="display:flex; gap:10px;">

<input type="text"
name="search"
value="{{ search }}"
placeholder="문의 검색"
style="width:300px;">

<button type="submit">
검색
</button>

</form>

<button type="button" onclick="openMyInquiryModal()">
내 문의 조회
</button>

</div>

<div id="myInquiryModal"
style="
display:none;
position:fixed;
top:0;
left:0;
width:100%;
height:100%;
background:rgba(0,0,0,0.5);
justify-content:center;
align-items:center;
z-index:9999;
">

<div style="
background:white;
padding:30px;
border-radius:10px;
width:300px;
">

<h3 style="margin-top:0;">내 문의 조회</h3>

<form method="post" action="/my_inquiries">

<input type="text"
name="name"
placeholder="이름"
required
style="width:100%; margin-bottom:10px; padding:8px;">

<input type="text"
name="phone"
placeholder="전화번호"
required
style="width:100%; margin-bottom:15px; padding:8px;">

<div style="text-align:right;">

<button type="button"
onclick="closeMyInquiryModal()"
style="margin-right:5px;">
취소
</button>

<button type="submit">
조회
</button>

</div>

</form>

</div>

</div>

<div class="container">

{% for inquiry in inquiries %}

<div class="row"
onclick="location.href='/inquiry/{{ inquiry[0] }}'">

<div>
{{ inquiry[3] or "문의 내용" }}
</div>

<div>

{{ inquiry[1][:1] }}**

</div>

<div class="status {{ inquiry[5] }}">
{{ inquiry[5] }}
</div>

<div>
{{ inquiry[6][:10] if inquiry[6] }}
</div>

</div>

{% endfor %}

</div>


<div class="pagination">

{% for p in range(1,total_pages+1) %}

<a href="?page={{p}}&search={{search}}"
class="{% if p==page %}active{% endif %}">
{{p}}
</a>

{% endfor %}

</div>

<script>

function openMyInquiryModal(){
    document.getElementById("myInquiryModal").style.display="flex";
}

function closeMyInquiryModal(){
    document.getElementById("myInquiryModal").style.display="none";
}

// 배경 클릭시 닫기
document.getElementById("myInquiryModal").addEventListener("click", function(e){
    if(e.target === this){
        closeMyInquiryModal();
    }
});

</script>

</body>
</html>
