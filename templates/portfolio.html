<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ì‹œê³µ ì‚¬ë¡€</title>

<style>

body{
    font-family:'Noto Sans KR',sans-serif;
    background:#f1f5f9;
    margin:0;
}

/* ìƒë‹¨ */
.header{
    background:white;
    padding:20px 30px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    box-shadow:0 4px 12px rgba(0,0,0,0.05);
}

.header h1{
    margin:0;
}

.upload-box input{
    margin-right:10px;
}

/* ê°¤ëŸ¬ë¦¬ */
.gallery{
    max-width:1200px;
    margin:30px auto;
    display:grid;
    grid-template-columns:repeat(auto-fill,minmax(280px,1fr));
    gap:20px;
}

.card{
    background:white;
    border-radius:14px;
    overflow:hidden;
    box-shadow:0 6px 18px rgba(0,0,0,0.08);
    transition:0.3s;
}

.card:hover{
    transform:translateY(-5px);
}

.card img{
    width:100%;
    height:220px;
    object-fit:cover;
    cursor:pointer;
}

.card .actions{
    padding:10px;
    text-align:right;
}

.delete-btn{
    background:#ef4444;
    color:white;
    border:none;
    padding:6px 12px;
    border-radius:8px;
    cursor:pointer;
}

.delete-btn:hover{
    background:#dc2626;
}

/* í™•ëŒ€ ëª¨ë‹¬ */
.modal{
    display:none;
    position:fixed;
    top:0;
    left:0;
    width:100%;
    height:100%;
    background:rgba(0,0,0,0.9);
    justify-content:center;
    align-items:center;
}

.modal img{
    max-width:90%;
    max-height:90%;
}

</style>

</head>
<body>


<div class="header">

<h1>ğŸ›  ì‹œê³µ ì‚¬ë¡€</h1>

{% if is_admin %}
<div class="upload-box">

<form action="/admin/upload_portfolio"
      method="POST"
      enctype="multipart/form-data">

<input type="file" name="image" required>
<button type="submit">ì—…ë¡œë“œ</button>

</form>

</div>
{% endif %}

</div>


<div class="gallery">

{% for id, img in images %}

<div class="card">

<img src="{{ img.replace('/upload/','/upload/w_600,q_auto,f_auto/') }}"
     onclick="openModal('{{ img.replace('/upload/','/upload/w_1600,q_auto,f_auto/') }}')">


{% if is_admin %}
<div class="actions">

<form action="/admin/delete_portfolio/{{ id }}"
      method="POST">

<button class="delete-btn">
ì‚­ì œ
</button>

</form>

</div>
{% endif %}

</div>

{% endfor %}

</div>


<div class="modal" id="modal" onclick="closeModal()">
<img id="modalImg">
</div>


<script>

function openModal(src){

    document.getElementById("modalImg").src = src;
    document.getElementById("modal").style.display="flex";

}

function closeModal(){

    document.getElementById("modal").style.display="none";

}

</script>


</body>
</html>
