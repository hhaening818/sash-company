<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <title>ê±´ì§„ì°½í˜¸ | ì°½í˜¸ ì „ë¬¸ ì‹œê³µ</title>
    <style>
        /* ì „ì²´ ìŠ¤íƒ€ì¼ */
        body {
            margin: 0;
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #f0f2f5;
            color: #333;
        }

        /* í—¤ë” */
        header {
            background-color: #1e3a8a;
            color: white;
            text-align: center;
            padding: 50px 20px;
        }

        header h1 {
            margin: 0;
            font-size: 3em;
        }

        header p {
            margin-top: 10px;
            font-size: 1.2em;
        }

        /* ë„¤ë¹„ê²Œì´ì…˜ */
        nav {
            background-color: #111827;
            text-align: center;
        }

        nav a {
            display: inline-block;
            color: white;
            padding: 15px 25px;
            text-decoration: none;
            font-weight: bold;
            transition: background 0.3s;
        }

        nav a:hover {
            background-color: #1e3a8a;
        }

        /* ì„¹ì…˜ ì¹´ë“œ */
        section {
            padding: 50px 20px;
            text-align: center;
        }

        .card {
            background: white;
            padding: 30px;
            margin: 20px auto;
            width: 70%;
            border-radius: 15px;
            box-shadow: 0 6px 15px rgba(0,0,0,0.1);
        }

        .card h2 {
            color: #1e3a8a;
        }

        input, textarea {
            width: 80%;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            border: 1px solid #ccc;
        }

        button {
            padding: 10px 20px;
            background-color: #1e3a8a;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }

        button:hover {
            background-color: #1e3a8a;
        }

        /* í‘¸í„° */
        footer {
            background-color: #1e3a8a;
            color: white;
            text-align: center;
            padding: 20px;
        }

        /* ë°˜ì‘í˜• */
        @media(max-width:768px) {
            .card { width: 90%; }
            header h1 { font-size: 2em; }
        }
        .work-gallery {
             display:grid;
             grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
             gap:20px;
             margin-top:20px;
        }

        .work-gallery img {
             width:100%;
             height:250px;
             object-fit:cover;
             border-radius:15px;
             transition:0.3s;
        }

        .work-gallery img:hover {
             transform:scale(1.05);
             box-shadow:0 10px 25px rgba(0,0,0,0.15);
        }

        .slider {
             position: relative;
             max-width: 1000px;
             margin: auto;
             overflow: hidden;
        }

        .slides {
             display: flex;
             align-items: center;
             transition: transform 0.5s ease;
        }

        .slide {
             flex: 0 0 calc(33.33% - 20px); /* â­ margin ê³ ë ¤í•´ì„œ ë„ˆë¹„ ì¤„ì„ */
             margin: 0 10px;
             opacity: 0.8;
             transition: opacity 0.3s ease;
        }

        .slide img {
             width: 100%;
             height: auto;
             max-height: 300px;
             object-fit: contain;
        }

         .slide.active {
             opacity: 1; /* ê°€ìš´ë°ë§Œ ì„ ëª… */
        }

        /* íƒœë¸”ë¦¿ */
        @media (max-width:1024px) {

             .slide {
                 flex: 0 0 80%;
            }

        }


        /* ëª¨ë°”ì¼ */
        @media (max-width:600px) {

             .slide {
                flex: 0 0 90%;
            }
 
        }



        .prev, .next {
             position:absolute;
             top:50%;
             transform:translateY(-50%);
             background:rgba(0,0,0,0.5);
             color:white;
             border:none;
             font-size:28px;
             padding:10px 15px;
             cursor:pointer;
             border-radius:50%;
        }

        .prev { left:15px; }
        .next { right:15px; }

        .prev:hover, .next:hover {
             background:rgba(0,0,0,0.8);
        }
        
        /* ì¸ë„¤ì¼ */ 
        .slide img {
             width: 100%;
             height: 220px;
             object-fit: cover;
             cursor: pointer;
        }

        /* í™•ëŒ€ ëª¨ë‹¬ */
        .modal {
             display:none;
             position:fixed;
             z-index:9999;
             left:0;
             top:0;
             width:100%;
             height:100%;
             background:rgba(0,0,0,0.9);
             justify-content:center;
             align-items:center;
        }

        .modal img {
             max-width:90%;
             max-height:90%;
             border-radius:10px;
        }

        .modal.closeable {
             display:flex;
        }

        .modal{
        position:fixed;
        top:0;
        left:0;
        width:100%;
        height:100%;
        background:rgba(0,0,0,0.5);
        display:none;
        justify-content:center;
        align-items:center;
        }

        .modal-box{
        background:white;
        padding:30px;
        border-radius:15px;
        text-align:center;
        animation:pop 0.3s;
        } 

        .check{
        font-size:40px;
        color:green;
        }

        @keyframes pop{
        from{transform:scale(0.7);}
        to{transform:scale(1);}
        }

        .top-bar{
             width:100%;
             background:#3b4a8a;
             padding:15px 30px;
             display:flex;
             justify-content:flex-end;
             align-items:center;
             gap:10px;
             box-sizing:border-box;
        }

        .login-btn, .admin-btn, .logout-btn{

             background:white;
             color:#3b4a8a;
             padding:8px 16px;
             border-radius:8px;
             text-decoration:none;
             font-weight:bold;
        }


        .login-btn:hover,
        .admin-btn:hover,
        .logout-btn:hover{

             background:#ddd;
        }

        .hero-logo {

            width:100%;

            background:#f4f6f8;

            padding:80px 0;

            display:flex;

            justify-content:center;

            align-items:center;

            position:relative;

        }

        /* ë¡œê³  ì´ë¯¸ì§€ */
        .hero-logo-img {

            width:1200px;
            max-width:95%;

            opacity:0.6;

            filter:contrast(110%) saturate(105%);

        }



        .hero-logo-img:hover {

             transform:scale(1.03);
        }

        .hero-content{
             text-align:center;
        }

        .hero-text{

             margin-top:15px;
             font-size:20px;
             color:#334155;
             font-weight:500;
        }

         /* íˆì–´ë¡œ */
        .hero-section {

             height:100vh;

             display:flex;
             justify-content:center;
             align-items:center;

             background:linear-gradient(#f8fafc,#e2e8f0);
        }

        /* ì „ì²´ í—¤ë” */
        .main-header {

            display:none;

        }

        /* ê´€ë¦¬ì ë²„íŠ¼ ì˜¤ë¥¸ìª½ ìœ ì§€ */
        .header-buttons {

            position:absolute;

            right:20px;

            top:50%;

            transform:translateY(-50%);

        }

        /* ì¤‘ì•™ ë¡œê³  */
        .logo-center img {

            height:80px;

            cursor:pointer;

            margin-bottom:10px;

        }

        /* ë©”ë‰´ */
        .nav-menu {

            width:100%;

            background:#3b4a8a;

            display:flex;

            justify-content:center;

            gap:50px;

            padding:15px 0;

        }

        .nav-menu a {

            color:white;

            text-decoration:none;

            font-size:17px;

        }

        .nav-menu a:hover {

            opacity:0.7;

        }

        /* ì˜¤ë¥¸ìª½ ë²„íŠ¼ ì˜ì—­ */
        .header-buttons {

            position:absolute;

            right:20px;

            top:20px;

        }

        /* ë²„íŠ¼ ê³µí†µ */
        .btn {

            padding:5px 12px;

            font-size:13px;

            border-radius:12px;

        }

        .admin {

            background:#3b82f6;
            color:white;

        }

        .logout {

            background:#3b82f6;
            color:white;

        }

        .login {

            background:#3b82f6;
            color:white;

        }

        /* hover */
        .btn:hover {

            transform:translateY(-2px);

            box-shadow: none;

        }

        .admin:hover,
        .logout:hover,
        .login:hover {

            background:#2f3d73;

        }

        .main-header {
            display:none !important;
        }

    </style>
</head>
<body>

<section class="hero-logo">

    <div class="hero-content">

    <!-- ê´€ë¦¬ì / ë¡œê·¸ì¸ ë²„íŠ¼ ì¶”ê°€ -->
    <div class="header-buttons">

        {% if session.get('admin') %}

            <a href="/admin" class="btn admin">
                ê´€ë¦¬ì í˜ì´ì§€
            </a>

            <a href="/logout" class="btn logout">
                ë¡œê·¸ì•„ì›ƒ
            </a>

        {% else %}

            <a href="/login" class="btn login">
                ë¡œê·¸ì¸
            </a>

        {% endif %}

    </div>

    <img src="{{ url_for('static', filename='images/logo.png') }}"
         class="hero-logo-img">

    <p class="hero-text">
        30ë…„ ê²½ë ¥ì˜ ì „ë¬¸ ì°½í˜¸ ì‹œê³µ ê¸°ì—…
    </p>

</div>


</section>

<nav class="nav-menu">

    <a href="#about">íšŒì‚¬ì†Œê°œ</a>
    <a href="#services">ì‹œê³µ ë¶„ì•¼</a>
    <a href="/portfolio">ì‹œê³µ ì‚¬ë¡€</a>
    <a href="#contact">ë¬¸ì˜í•˜ê¸°</a>

</nav>

<section id="about">
    <div class="card">
        <h2>íšŒì‚¬ì†Œê°œ</h2>
        <p>30ë…„ ê²½ë ¥ì˜ ì „ë¬¸ê°€ê°€ ì§ì ‘ ì‹œê³µí•©ë‹ˆë‹¤.<br />
           ìµœê³ ì˜ ë‹¨ì—´, ë°©ìŒ, ë‚´êµ¬ì„± ë³´ì¥</p>
    </div>
</section>

<section id="service">
    <div class="card">
        <h2>ì‹œê³µ ë¶„ì•¼</h2>
        <p>âœ” ì•„íŒŒíŠ¸ ìƒ·ì‹œ êµì²´<br />
           âœ” ë‹¨ë…ì£¼íƒ ì°½í˜¸<br />
           âœ” ìƒê°€ ìœ ë¦¬ ì‹œê³µ<br />
           âœ” ë² ë€ë‹¤ í™•ì¥</p>
    </div>
</section>

<section id="portfolio">
    <div class="card">
        <h2>ğŸ›  ì‹œê³µ ì‚¬ë¡€</h2>

        <a href="/portfolio">
            <button style="
                margin-top:15px;
                padding:12px 20px;
                font-size:16px;
                border-radius:10px;
                cursor:pointer;">
                ì „ì²´ ì‹œê³µ ì‚¬ë¡€ ë³´ê¸° â†’
            </button>
        </a>

        <div class="slider">

             <button class="prev">&#10094;</button>

        <div class="slides">

             {% for img in images %}

             <div class="slide">

                 <img src="{{ img.replace('/upload/', '/upload/w_400,q_auto,f_auto/') }}"
                 data-full="{{ img.replace('/upload/', '/upload/w_1600,q_auto,f_auto/') }}"
                 loading="lazy">

            </div>

            {% endfor %}

        </div>

        <button class="next">&#10095;</button>

    </div>

    </div>
</section>

<section id="contact">
    <div class="card">
        <h2>ë¬´ë£Œ ê²¬ì  ë¬¸ì˜</h2>
        <form id="contactForm" enctype="multipart/form-data">

            <input type="text" name="name" placeholder="ì´ë¦„" required /><br />
            <input type="text" name="phone" placeholder="ì—°ë½ì²˜" required /><br />
            <textarea name="message" placeholder="ë¬¸ì˜ ë‚´ìš©" rows="4"></textarea><br />
            <input type="file" name="image">

            <button type="submit">ê²¬ì  ìš”ì²­í•˜ê¸°</button>
        </form>

        <!-- ë¬¸ì˜ ì¡°íšŒ íŒì—… -->
        <div id="inquiryModal" class="modal">

             <div class="modal-box">

                 <h3>ë¬¸ì˜ ì¡°íšŒ</h3>

                <input type="text" id="searchName"
                     placeholder="ì´ë¦„"><br>

                <input type="text" id="searchPhone"
                     placeholder="ì—°ë½ì²˜"><br>

                <button onclick="searchInquiry()">
                     ì¡°íšŒ
                </button>

                <button onclick="closeInquiryModal()">
                     ë‹«ê¸°
                </button>

                <div id="inquiryResult"
                     style="margin-top:15px;text-align:left;">
                </div>

            </div>

        </div>
        
        <button type="button" onclick="openInquiryModal()">
        ë¬¸ì˜ ì¡°íšŒ
        </button>

    </div>
</section>

<div id="successModal" class="modal">
    <div class="modal-box">
        <div class="check">âœ”</div>
        <h3>ë¬¸ì˜ê°€ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤</h3>
        <p>ë¹ ë¥´ê²Œ ì—°ë½ë“œë¦¬ê² ìŠµë‹ˆë‹¤.</p>
        <button onclick="closeModal()">í™•ì¸</button>
    </div>
</div>

<footer>
    ğŸ“ 010-7137-2313 | ê±´ì§„ì°½í˜¸<br />
</footer>

<div class="modal" id="imageModal">
    <img id="modalImage">
</div>

<!-- ëª¨ë°”ì¼ ê³ ì • ì „í™” ë²„íŠ¼ -->
<a href="tel:01071372313"
   style="
   position:fixed;
   bottom:20px;
   right:20px;
   background:#22c55e;
   color:white;
   padding:15px 20px;
   border-radius:50px;
   font-weight:bold;
   text-decoration:none;
   box-shadow:0 4px 10px rgba(0,0,0,0.3);
   z-index:999;">
ğŸ“ ë°”ë¡œ ì „í™”
</a>

<script>

const slidesContainer = document.querySelector('.slides');
let slides = document.querySelectorAll('.slide');

let index = 0;
let isPaused = false;


// ë¬´í•œë£¨í”„ ë³µì œ
slides.forEach(slide => {
    slidesContainer.appendChild(slide.cloneNode(true));
});

slides = document.querySelectorAll('.slide');


function updateSlides() {

    slides.forEach(slide =>
        slide.classList.remove('active')
    );

    slides[index].classList.add('active');

    const offset =
        slides[index].offsetLeft
        - slidesContainer.offsetWidth / 2
        + slides[index].offsetWidth / 2;

    slidesContainer.style.transform =
        `translateX(-${offset}px)`;

}


// ë²„íŠ¼
document.querySelector('.next').onclick = () => {

    index++;

    if(index >= slides.length)
        index = 0;

    updateSlides();

};

document.querySelector('.prev').onclick = () => {

    index--;

    if(index < 0)
        index = slides.length - 1;

    updateSlides();

};


// ìë™ ìŠ¬ë¼ì´ë“œ
setInterval(() => {

    if(!isPaused) {

        index++;

        if(index >= slides.length)
            index = 0;

        updateSlides();

    }

}, 4000);


// ë§ˆìš°ìŠ¤ ë©ˆì¶¤
slidesContainer.addEventListener('mouseenter', () => {
    isPaused = true;
});

slidesContainer.addEventListener('mouseleave', () => {
    isPaused = false;
});


// í„°ì¹˜
let startX = 0;

slidesContainer.addEventListener('touchstart', e => {
    startX = e.touches[0].clientX;
});

slidesContainer.addEventListener('touchend', e => {

    let endX = e.changedTouches[0].clientX;

    if(startX - endX > 50)
        document.querySelector('.next').click();

    if(endX - startX > 50)
        document.querySelector('.prev').click();

});


// ì‹œì‘
updateSlides();

const modal = document.getElementById("imageModal");
const modalImg = document.getElementById("modalImage");

document.querySelectorAll(".slide img").forEach(img => {

    img.addEventListener("click", () => {

        modal.classList.add("closeable");

        modalImg.src =
            img.dataset.full || img.src;

    });

});

modal.addEventListener("click", () => {

    modal.classList.remove("closeable");

});

</script>

<script>

function closeModal(){
document.getElementById("successModal").style.display="none";
}

</script>

<script>

// ëª¨ë“  modal ê°•ì œ ë¹„í™œì„±í™”
window.addEventListener("load", function(){

    document.querySelectorAll(".modal").forEach(function(modal){
        modal.style.display = "none";
    });

    document.querySelectorAll(".image-viewer").forEach(function(viewer){
        viewer.style.display = "none";
    });

});

</script>

<script>

window.addEventListener("scroll", function(){

    const header = document.getElementById("mainHeader");

});

</script>

<script>

// ë¬¸ì˜ ë“±ë¡ â†’ íŒì—… ì²˜ë¦¬
document.getElementById("contactForm")
.addEventListener("submit", function(e){

    e.preventDefault();

    const formData = new FormData(this);

    fetch("/contact", {

        method:"POST",
        body:formData

    })
    .then(res=>{

        document.getElementById("successModal")
        .style.display="flex";

        document.getElementById("contactForm").reset();

    });

});


// ë¬¸ì˜ ì¡°íšŒ íŒì—… ì—´ê¸°
function openInquiryModal(){

    document.getElementById("inquiryModal").style.display="flex";

}


// ë¬¸ì˜ ì¡°íšŒ íŒì—… ë‹«ê¸°
function closeInquiryModal(){

    document.getElementById("inquiryModal").style.display="none";

}


// ë¬¸ì˜ ì¡°íšŒ
function searchInquiry(){

    const name =
        document.getElementById("searchName").value;

    const phone =
        document.getElementById("searchPhone").value;

    fetch("/search_inquiry",{

        method:"POST",

        headers:{
            "Content-Type":"application/json"
        },

        body:JSON.stringify({
            name:name,
            phone:phone
        })

    })

    .then(res=>res.json())

    .then(data=>{

        let html="";

        if(data.length === 0){

            html="<p>ì¡°íšŒëœ ë¬¸ì˜ê°€ ì—†ìŠµë‹ˆë‹¤.</p>";

        }else{

            data.forEach(item=>{

                html+=`
                <div style="
                    border:1px solid #ddd;
                    padding:10px;
                    margin:10px 0;
                    border-radius:8px;
                ">

                <b>ë¬¸ì˜ë‚´ìš©:</b><br>
                ${item.message}<br><br>

                <b>ìƒíƒœ:</b> ${item.status}<br>

                <b>ë‚ ì§œ:</b> ${item.created_at}

                </div>
                `;

            });

        }

        document.getElementById("inquiryResult")
        .innerHTML=html;

    });

}

</script>

</body>
</html>